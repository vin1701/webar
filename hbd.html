<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Happy Birthday AR Fireworks</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  </head>

  <body>
    <a-scene
      vr-mode-ui="enabled: false"
      arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;"
    >
      <!-- Happy Birthday Text -->
      <a-text
        value="ðŸŽ‰ HAPPY BIRTHDAY! ðŸŽ‰"
        scale="25 25 25"
        color="#FFD700"
        align="center"
        position="0 15 0"
        look-at="[gps-camera]"
        gps-entity-place="latitude: 19.258066; longitude: 72.963154"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 8000"
      ></a-text>

      <!-- Fireworks Container -->
      <a-entity 
        id="fireworks-container"
        gps-entity-place="latitude: 19.258066; longitude: 72.963154"
        position="0 10 0">
        
        <!-- Central Firework Burst -->
        <a-entity
          particle-system="preset: default; color: #FF0040,#FF6600,#FFAA00,#00FF88,#0088FF,#8800FF; 
                           particleCount: 100; maxAge: 3; positionSpread: 2 2 2; 
                           velocityValue: 8 8 8; velocitySpread: 4 4 4; accelerationValue: 0 -5 0"
          position="0 0 0"
          animation="property: particle-system.velocityValue; to: 12 12 12; startEvents: firework1; dur: 1000"
        ></a-entity>

        <!-- Left Firework -->
        <a-entity
          particle-system="preset: snow; color: #FF1493,#FF69B4,#FFB6C1; 
                           particleCount: 80; maxAge: 2.5; positionSpread: 1.5 1.5 1.5; 
                           velocityValue: 6 10 6; velocitySpread: 3 3 3"
          position="-8 0 0"
          animation="property: particle-system.velocityValue; to: 10 15 10; startEvents: firework2; dur: 1200"
        ></a-entity>

        <!-- Right Firework -->
        <a-entity
          particle-system="preset: default; color: #00FF00,#32CD32,#90EE90; 
                           particleCount: 80; maxAge: 2.5; positionSpread: 1.5 1.5 1.5; 
                           velocityValue: 6 10 6; velocitySpread: 3 3 3"
          position="8 0 0"
          animation="property: particle-system.velocityValue; to: 10 15 10; startEvents: firework3; dur: 1200"
        ></a-entity>

        <!-- High Firework -->
        <a-entity
          particle-system="preset: default; color: #1E90FF,#87CEEB,#ADD8E6; 
                           particleCount: 60; maxAge: 3; positionSpread: 2 2 2; 
                           velocityValue: 5 8 5; velocitySpread: 4 4 4"
          position="0 8 0"
          animation="property: particle-system.velocityValue; to: 8 12 8; startEvents: firework4; dur: 1500"
        ></a-entity>

        <!-- Golden Sparkles -->
        <a-entity
          particle-system="preset: default; color: #FFD700,#FFA500,#FFFF00; 
                           particleCount: 150; maxAge: 4; positionSpread: 3 3 3; 
                           velocityValue: 3 6 3; velocitySpread: 2 2 2; size: 0.5"
          position="0 -2 0"
          animation="property: rotation; to: 0 360 0; loop: true; dur: 6000"
        ></a-entity>
      </a-entity>

      <!-- Birthday Cake Model (using primitives) -->
      <a-entity 
        gps-entity-place="latitude: 19.258066; longitude: 72.963154"
        position="0 5 0">
        
        <!-- Cake Base -->
        <a-cylinder
          color="#8B4513"
          height="2"
          radius="2"
          position="0 0 0"
        ></a-cylinder>
        
        <!-- Cake Top -->
        <a-cylinder
          color="#FFB6C1"
          height="1.5"
          radius="1.8"
          position="0 1.75 0"
        ></a-cylinder>
        
        <!-- Candles -->
        <a-cylinder color="#FFFF00" height="1" radius="0.1" position="-0.8 3.5 0"></a-cylinder>
        <a-cylinder color="#FFFF00" height="1" radius="0.1" position="0 3.5 0"></a-cylinder>
        <a-cylinder color="#FFFF00" height="1" radius="0.1" position="0.8 3.5 0"></a-cylinder>
        
        <!-- Candle Flames -->
        <a-sphere 
          color="#FF6600" 
          radius="0.2" 
          position="-0.8 4.2 0"
          animation="property: scale; to: 1.2 1.5 1.2; direction: alternate; loop: true; dur: 500">
        </a-sphere>
        <a-sphere 
          color="#FF6600" 
          radius="0.2" 
          position="0 4.2 0"
          animation="property: scale; to: 1.2 1.5 1.2; direction: alternate; loop: true; dur: 600">
        </a-sphere>
        <a-sphere 
          color="#FF6600" 
          radius="0.2" 
          position="0.8 4.2 0"
          animation="property: scale; to: 1.2 1.5 1.2; direction: alternate; loop: true; dur: 550">
        </a-sphere>
      </a-entity>

      <!-- Balloons -->
      <a-entity gps-entity-place="latitude: 19.258066; longitude: 72.963154">
        <a-sphere 
          color="#FF1493" 
          radius="1" 
          position="-10 12 0"
          animation="property: position; to: -10 15 0; direction: alternate; loop: true; dur: 2000">
        </a-sphere>
        <a-sphere 
          color="#00FF00" 
          radius="1" 
          position="10 12 0"
          animation="property: position; to: 10 15 0; direction: alternate; loop: true; dur: 2500">
        </a-sphere>
        <a-sphere 
          color="#1E90FF" 
          radius="1" 
          position="0 18 -5"
          animation="property: position; to: 0 21 -5; direction: alternate; loop: true; dur: 3000">
        </a-sphere>
      </a-entity>

      <!-- <a-camera gps-camera rotation-reader></a-camera> -->
      <a-camera gps-camera></a-camera>
    </a-scene>

    <script>
      // Trigger fireworks sequence
      function startFireworks() {
        const events = ['firework1', 'firework2', 'firework3', 'firework4'];
        let delay = 0;
        
        events.forEach((event, index) => {
          setTimeout(() => {
            document.querySelector('a-scene').emit(event);
          }, delay);
          delay += 800 + Math.random() * 400; // Random delay between 800-1200ms
        });
      }

      // Start fireworks when scene loads
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(() => {
          startFireworks();
          // Repeat fireworks every 10 seconds
          setInterval(startFireworks, 10000);
        }, 2000);
      });
    </script>
  </body>
</html>
